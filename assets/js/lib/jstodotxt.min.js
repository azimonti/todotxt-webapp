"use strict";var jsTodoTxt=(()=>{var P=(r,t)=>()=>(t||r((t={exports:{}}).exports,t),t.exports);var T=P(j=>{"use strict";var i=j&&j.__classPrivateFieldSet||function(r,t,e,s,n){if(s==="m")throw new TypeError("Private method is not writable");if(s==="a"&&!n)throw new TypeError("Private accessor was defined without a setter");if(typeof t=="function"?r!==t||!n:!t.has(r))throw new TypeError("Cannot write private member to an object whose class did not declare it");return s==="a"?n.call(r,e):n?n.value=e:t.set(r,e),e},o=j&&j.__classPrivateFieldGet||function(r,t,e,s){if(e==="a"&&!s)throw new TypeError("Private accessor was defined without a getter");if(typeof t=="function"?r!==t||!s:!t.has(r))throw new TypeError("Cannot read private member from an object whose class did not declare it");return e==="m"?s:e==="a"?s.call(r):s?s.value:t.get(r)},y,_,m,w,l,h,c,u;Object.defineProperty(j,"__esModule",{value:!0});j.Item=void 0;var B=/^((x) )?(\(([A-Z])\) )?(((\d{4}-\d{2}-\d{2}) (\d{4}-\d{2}-\d{2})|(\d{4}-\d{2}-\d{2})) )?(.*)$/,G=/(^|\s)([^\s:]+:[^\s:]+|[+@]\S+)/g,N=/^\d{4}-\d{2}-\d{2}$/;function S(r){let t=0,e=(r.match(G)||[]).map(a=>a.trimStart()).map(a=>{let p=r.indexOf(a,t);return p!=-1&&(t=p+a.length),[a,p]}),s=[],n=[],f=[];return e.forEach(([a,p])=>{if(a[0]=="@")s.push({tag:a.slice(1),start:p});else if(a[0]=="+")n.push({tag:a.slice(1),start:p});else{let C=a.split(":",2);f.push({key:C[0],value:C[1],start:p})}}),{contexts:s,projects:n,extensions:f}}function b(r){if(N.exec(r)===null)throw new Error("Invalid Date Format");return new Date(parseInt(r.slice(0,4),10),parseInt(r.slice(5,7),10)-1,parseInt(r.slice(8),10))}var E=class{constructor(t){y.set(this,!1),_.set(this,null),m.set(this,null),w.set(this,null),l.set(this,""),h.set(this,[]),c.set(this,[]),u.set(this,[]),this.parse(t)}parse(t){i(this,y,!1,"f"),i(this,_,null,"f"),i(this,m,null,"f"),i(this,w,null,"f"),i(this,l,"","f"),i(this,h,[],"f"),i(this,c,[],"f"),i(this,u,[],"f");let e=B.exec(t);i(this,y,e[2]==="x","f"),i(this,_,e[4]||null,"f"),typeof e[9]!="undefined"?i(this,m,b(e[9]),"f"):typeof e[7]!="undefined"&&(i(this,w,b(e[7]),"f"),i(this,m,b(e[8]),"f")),this.setBody(e[10])}toString(){return[o(this,y,"f")?"x":"",o(this,_,"f")?`(${o(this,_,"f")})`:"",this.completedToString(),this.createdToString(),o(this,l,"f")].filter(e=>e!==null&&e!=="").join(" ")}toAnnotatedString(){let t=this.toString(),e=t.length-o(this,l,"f").length;function s(f){return function(a){let p=[f,a.tag].join("");return{string:p,span:{start:a.start+e,end:a.start+e+p.length}}}}function n(f){let a=`${f.key}:${f.value}`;return{string:a,parsed:{key:f.key,value:f.value},span:{start:f.start+e,end:f.start+e+a.length}}}return{string:t,contexts:o(this,h,"f").map(s("@")),projects:o(this,c,"f").map(s("+")),extensions:o(this,u,"f").map(n)}}complete(){return o(this,y,"f")}setComplete(t){i(this,y,t,"f"),t||this.clearCompleted()}priority(){return o(this,_,"f")}setPriority(t=null){if(t){let e=t.charCodeAt(0);if(t.length!==1||e<65||e>90)throw new Error("Invalid Priority")}i(this,_,t,"f")}clearPriority(){i(this,_,null,"f")}created(){return o(this,m,"f")}createdToString(){return M(o(this,m,"f"))}setCreated(t=null){t===null?this.clearCreated():t instanceof Date?i(this,m,t,"f"):i(this,m,b(t),"f")}clearCreated(){i(this,m,null,"f"),i(this,w,null,"f")}completed(){return o(this,w,"f")}completedToString(){return M(o(this,w,"f"))}setCompleted(t=null){t===null?this.clearCompleted():(t instanceof Date?i(this,w,t,"f"):i(this,w,b(t),"f"),i(this,y,!0,"f"))}clearCompleted(){i(this,w,null,"f")}body(){return o(this,l,"f")}setBody(t){let{contexts:e,projects:s,extensions:n}=S(t);i(this,l,t,"f"),i(this,h,e,"f"),i(this,c,s,"f"),i(this,u,n,"f")}contexts(){return[...new Set(o(this,h,"f").map(({tag:t})=>t))]}addContext(t){o(this,h,"f").some(e=>t===e.tag)||(o(this,h,"f").push({tag:t,start:o(this,l,"f").length}),i(this,l,[o(this,l,"f"),`@${t}`].join(" "),"f"))}removeContext(t){let e=O(o(this,l,"f"),o(this,h,"f"),t);if(e!==null){i(this,l,e,"f");let{contexts:s,projects:n,extensions:f}=S(o(this,l,"f"));i(this,h,s,"f"),i(this,c,n,"f"),i(this,u,f,"f")}}projects(){return[...new Set(o(this,c,"f").map(({tag:t})=>t))]}addProject(t){o(this,c,"f").some(e=>t===e.tag)||(o(this,c,"f").push({tag:t,start:o(this,l,"f").length}),i(this,l,[o(this,l,"f"),`+${t}`].join(" "),"f"))}removeProject(t){let e=O(o(this,l,"f"),o(this,c,"f"),t);if(e!==null){i(this,l,e,"f");let{contexts:s,projects:n,extensions:f}=S(o(this,l,"f"));i(this,h,s,"f"),i(this,c,n,"f"),i(this,u,f,"f")}}extensions(){return o(this,u,"f").map(({key:t,value:e})=>({key:t,value:e}))}setExtension(t,e){let s=!1;if(o(this,u,"f").forEach(n=>{if(n.key===t){let f=o(this,l,"f").slice(0,n.start),a=o(this,l,"f").slice(n.start+n.key.length+n.value.length+1);s?i(this,l,[f.slice(0,f.length-1),a].join(""),"f"):i(this,l,[f,`${t}:${e}`,a].join(""),"f"),s=!0}}),s){let{contexts:n,projects:f,extensions:a}=S(o(this,l,"f"));i(this,h,n,"f"),i(this,c,f,"f"),i(this,u,a,"f")}else this.addExtension(t,e)}addExtension(t,e){o(this,u,"f").push({key:t,value:e,start:o(this,l,"f").length}),i(this,l,[o(this,l,"f"),`${t}:${e}`].join(" "),"f")}removeExtension(t,e=null){let s=o(this,u,"f").filter(n=>n.key===t&&(e===null||n.value===e)).map(n=>({start:n.start,end:n.start+n.key.length+n.value.length+1})).sort((n,f)=>n.start<f.start?1:-1);if(s.length>0){i(this,l,F(o(this,l,"f"),s),"f");let{contexts:n,projects:f,extensions:a}=S(o(this,l,"f"));i(this,h,n,"f"),i(this,c,f,"f"),i(this,u,a,"f")}}};j.Item=E;y=new WeakMap,_=new WeakMap,m=new WeakMap,w=new WeakMap,l=new WeakMap,h=new WeakMap,c=new WeakMap,u=new WeakMap;function M(r){return r!==null?r.getFullYear()+"-"+(r.getMonth()+1<10?"0":"")+(r.getMonth()+1)+"-"+(r.getDate()<10?"0":"")+r.getDate():""}function F(r,t){return t.forEach(({start:e,end:s})=>{r=[r.slice(0,e-1),r.slice(s)].join("")}),r}function O(r,t,e){let s=t.filter(n=>n.tag===e).map(n=>({start:n.start,end:n.start+n.tag.length+1})).sort((n,f)=>n.start<f.start?1:-1);return s.length===0?null:F(r,s)}});var W=P(v=>{"use strict";var R=v&&v.__classPrivateFieldSet||function(r,t,e,s,n){if(s==="m")throw new TypeError("Private method is not writable");if(s==="a"&&!n)throw new TypeError("Private accessor was defined without a setter");if(typeof t=="function"?r!==t||!n:!t.has(r))throw new TypeError("Cannot write private member to an object whose class did not declare it");return s==="a"?n.call(r,e):n?n.value=e:t.set(r,e),e},g=v&&v.__classPrivateFieldGet||function(r,t,e,s){if(e==="a"&&!s)throw new TypeError("Private accessor was defined without a getter");if(typeof t=="function"?r!==t||!s:!t.has(r))throw new TypeError("Cannot read private member from an object whose class did not declare it");return e==="m"?s:e==="a"?s.call(r):s?s.value:t.get(r)},d;Object.defineProperty(v,"__esModule",{value:!0});v.List=void 0;var $=T(),I=class{constructor(t){d.set(this,[]);let e;typeof t=="string"?e=t.split(`
`):e=t,R(this,d,e.map(s=>s.trimEnd()).filter(s=>s.length>0).map(s=>new $.Item(s.trimEnd())),"f")}toString(){return g(this,d,"f").map(t=>t.toString()).join(`
`)}items(){return g(this,d,"f").map((t,e)=>({index:e,item:t}))}projects(){return[...new Set(g(this,d,"f").map(t=>t.projects()).reduce((t,e)=>[...t,...e],[]))]}contexts(){return[...new Set(g(this,d,"f").map(t=>t.contexts()).reduce((t,e)=>[...t,...e],[]))]}extensions(){let t={};return g(this,d,"f").forEach(e=>{e.extensions().forEach(s=>{let n=t[s.key]||[];n.push(s.value),t[s.key]=[...new Set(n)]})}),t}filter(t){return this.items().filter(({item:e})=>{if(t.complete!==void 0&&t.complete!==e.complete()||t.priority!==void 0&&t.priority!==e.priority()||t.created!==void 0&&!D(e.created(),t.created)||t.completed!==void 0&&!D(e.completed(),t.completed))return!1;if(t.body!==void 0){if(t.body instanceof RegExp){if(t.body.exec(e.body())===null)return!1}else if(t.body!==e.body())return!1}let s=e.contexts();if(t.contextsAnd!==void 0&&t.contextsAnd.some(f=>!s.includes(f))||t.contextsOr!==void 0&&!t.contextsOr.some(f=>s.includes(f))||t.contextsNot!==void 0&&t.contextsNot.some(f=>s.includes(f)))return!1;let n=e.projects();if(t.projectsAnd!==void 0&&t.projectsAnd.some(f=>!n.includes(f))||t.projectsOr!==void 0&&!t.projectsOr.some(f=>n.includes(f))||t.projectsNot!==void 0&&t.projectsNot.some(f=>n.includes(f)))return!1;if(t.extensions!==void 0){if(typeof t.extensions=="function"){if(!t.extensions(e.extensions()))return!1}else if(!e.extensions().some(({key:f})=>t.extensions.includes(f)))return!1}return!0})}add(t){return typeof t=="string"?g(this,d,"f").push(new $.Item(t)):g(this,d,"f").push(t),{item:g(this,d,"f")[g(this,d,"f").length-1],index:g(this,d,"f").length-1}}};v.List=I;d=new WeakMap;function D(r,t){if(t===null){if(r!==null)return!1}else{if(r===null)return!1;if(t.start!==void 0&&r<t.start||t.end!==void 0&&r>t.end)return!1}return!0}});var L=P(x=>{var q=x&&x.__createBinding||(Object.create?function(r,t,e,s){s===void 0&&(s=e);var n=Object.getOwnPropertyDescriptor(t,e);(!n||("get"in n?!t.__esModule:n.writable||n.configurable))&&(n={enumerable:!0,get:function(){return t[e]}}),Object.defineProperty(r,s,n)}:function(r,t,e,s){s===void 0&&(s=e),r[s]=t[e]}),A=x&&x.__exportStar||function(r,t){for(var e in r)e!=="default"&&!Object.prototype.hasOwnProperty.call(t,e)&&q(t,r,e)};Object.defineProperty(x,"__esModule",{value:!0});A(T(),x);A(W(),x)});return L();})();
//# sourceMappingURL=jstodotxt.min.js.map
